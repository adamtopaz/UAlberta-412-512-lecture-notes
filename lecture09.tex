\section{Lecture 9}

Let's start today with the proof of the theorem that we mentioned last time.
Let's now discuss some variants and applications of the above results.
\begin{theorem}
  Let $\afrak$ be an ideal of $\Ocal_{K}$.
  Then there exists a nonzero element $a \in \afrak$ such that
  \[ |N_{K|\Qbb}(a)| \leq \frac{n!}{n^{n}}\left(\frac{4}{\pi}\right)^{s} \sqrt{|d_{K}|} \cdot N(\afrak). \]
\end{theorem}
\begin{proof}
  We proceed as in the proof of the theorem above, considering the set
  \[ S_{t} = \{ (z_{\tau}) \in K_{\Rbb} \ | \  \sum_{\tau} | z_{\tau}| < t \}. \]
  As $t$ goes to $\infty$, so does the volume of this set.
  By the variant of Minkowski's lattice point theorem, this set will contain a nonzero element of $\afrak$ as soon as the volume of $S_{t}$ is at least as large as that of $2^{n} \cdot covol(\afrak)$.
  If we have such an element, say $x$, then its norm satisfies
  \[ |\Norm_{K|\Qbb}(x) = \prod_{i = 1}^{r}|\rho_{i}(x)| \cdot \prod_{i = 1}^{s}|\sigma_{i}(x)|^{2}. \]
  By the comparison of arithmetric and geometric means, we have
  \[ |\Norm_{K|\Qbb}(x)| \leq (\sum_{\tau}|\tau x|)^{n}/n^{n} \leq t^{n}/n^{n}. \]

  We leave it as an exercise to show that the volume of $S_{t}$ is $2^{r}\pi^{s}t^{n}/n!$.
  The inequality above then becomes
  \[ 2^{r}\pi^{s}t^{n}/n! \geq 2^{n} covol(\afrak) = 2^{n} \sqrt{|d_{K}|} N(\afrak). \]
  Solving for $t^{n}$, we have
  \[ t^{n} \geq n! 2^{n-r} (1/\pi^{s}) \Norm(\afrak) \sqrt{|d_{K}|}. \]
  Taking $t$ so that this is an equality, we the norm computation above would result in
  \[ |\Norm_{K|\Qbb}(x)| \leq (\sum_{\tau}|\tau x|)^{n}/n^{n} \leq (n!/n^{n}) 2^{n-r} (1/\pi^{s}) \Norm(\afrak) \sqrt{|d_{K}|}. \]
  Noting that $n - r = 2s$, the claim follows.
\end{proof}

We will also need the propoerties about ideal norms that we mentioned last time.
Let's actually develop the theory properly.
Let $A$ be a Dedekind domain with fraction field $K$, $L$ a finite separable extension of $K$ and $B$ the normalization of $A$ in $L$.

Let $\Pfrak$ be a nonzero prime ideal of $A$ and put $\pfrak = \Pfrak \cap A$.
The extension of residue fields $A/\pfrak \to B/\Pfrak$ is finite, and we write $f(\Pfrak|\pfrak) := [B/\Pfrak : A/\pfrak]$.
We \emph{define}
\[ \Norm_{L|K}(\Pfrak) := \pfrak^{f(\Pfrak|\pfrak)}, \]
and extend it to a homomorphism of abelian groups on $J_{L}(B)$ in the unique way.
This norm map is clearly multiplicative, and \todo{transitive in towers.}{Add a precise assertion.}

We will need the following fundamental result. First, we begin with some definitions:

\begin{definition}
  Let $\pfrak$ be a prime ideal of $A$. 
  Then since $B$ is Dedekind, we may write $\pfrak \cdot B = \Pfrak_1^{e_1}\cdot\Pfrak_k^{e_k}$ for some prime ideals $\Pfrak_i$ of $B$ lying above $\pfrak$, and positive integers $e_i$.
  Each $e_i$ is known as the ramification index of $\Pfrak_i$ above $\pfrak$, and will be denoted $e(\Pfrak_i|\pfrak)$. 
\end{definition}
\begin{definition}
  Let $\pfrak$ be a prime ideal of $A$, and $\Pfrak$ a prime ideal of $B$ lying above $\pfrak$.
  The inertial degree of $\Pfrak$ above $\pfrak$, denoted $f(\Pfrak|\pfrak)$ is defined to be the dimension of $B/\Pfrak$ over the field $A/\pfrak$.
\end{definition}
\begin{theorem}\label{Chinese Remainder Theorem}
  Let A a ring $I_{1},\ldots,I_{k}$ ideals of R such that $I_i + I_j = R$ for all $i\neq j$.
  Then the natural homomorphism
  \[ \phi:R \rightarrow \prod_i R/I_i \]
  Induces an isomorphism
  \[ \hat{\phi}:\frac{R}{I_1\cdots I_k} \rightarrow \oplus_i R/I_i \]
\end{theorem}
\begin{proof}
  First claim, 
  \[ I_1\cdots I_{k-1} + I_k = R \]
  To simplify things we will look at the case $k=3$.
  Then $\exists a,b \in I_3, \ x \in I_1, \ y \in I_2$ such that $a + x = 1$ and $b + y = 1$.
  Then we have $ab + ay + bx \in I_3$ and $xy \in I_1\cdot I_2$ with $ab + ay + bx + xy$.
  Thus we have $I_1\cdot I_2 + I_3 = R$. The general case follows easily.
  
  Now to prove our theorem we may apply induction and reduce to the case of two ideals $I,J$.
  First we show our morphism is a surjection.

  Let $x,y \in R$ representatives for an element of $R/I \times R/J$.
  Now take $a \in I, \ b \in J$ such that $a + b = 1$.
  Then we have $x*a + x*b = x$ and similarly for y.
  But then it is clear that $y*a + x*b$ is congruent to $x,y$ mod $I,J$ respectively.
  Thus our map is a sujection.

  Now we prove that the kernel is $I\cdot J$.
  $I\cdot J \subset ker(\phi)$ is clear.
  Conversely let $r \in ker(\phi)$, $a,b$ as before.
  Then $r \in I,J$ so we have $ra,rb \in I\cdot J$.
  But $ra + rb = r$, thus $r \in I\cdot$.
  So $I\cdot J = ker(\phi)$.
  
  Thus the first isomorphism theorem completes the proof
\end{proof}
\begin{lemma}\label{lemma:fundamental_equality}
  Let $\pfrak$ be a prime ideal of $A$ and let $\Pfrak_{1},\ldots,\Pfrak_{k}$ be all the primes of $B$ lying above $\pfrak$.
  Then
  \[ [L:K] = \sum_{i} e(\Pfrak_{i}|\pfrak) \cdot f(\Pfrak_{i}|\pfrak). \]
  If furthermore $L|K$ is Galois, then $e := e(\Pfrak_{i}|\pfrak)$ and $f := f(\Pfrak_{i}|\pfrak)$ doesn't depend on $i$, so the sum above becomes $k \cdot e \cdot f$.
\end{lemma}
\begin{proof}
  Put $e_{i} := e(\Pfrak_{i}|\pfrak)$ and $f_{i} := f(\Pfrak_{i}|\pfrak)$.
  By the \todo{Chinese remainder theorem}{Add statement and proof.} we have
  \[ B/\pfrak \cdot B \cong \prod_{i} B/\Pfrak_{i}^{e_{i}}, \]
  and it is \todo{easy to see}{Add proof.} that $B/\Pfrak_{i}^{e_{i}}$ has dimension $e_{i} f_{i}$ over $A/\pfrak$.
  Thus $B/\pfrak B$ has dimension $\sum_{i} e_{i} f_{i}$ over $A/\pfrak$.

  If $A$ is a PID, then we \todo{easily see}{Add details.} that $[L:K]$ is also the dimension of $B/\pfrak B$ over $A/\pfrak$, since $B$ is a free $A$-module of rank $[L:K]$.
  In general, replace $A$ with $A_{\pfrak}$ and use the fact that local Dedekind domains are DVRs (hence PIDs) to reduce to the previous case.

  Now in the case where $L|K$ is Galois, there is an action of $\Gal(L|K)$ on $\{\Pfrak_{1},\ldots,\Pfrak_{k}\}$ and if $\sigma \in \Gal(L|K)$ is given, then clearly $e(\Pfrak|\pfrak) = e(\sigma\Pfrak|\pfrak)$ and similarly for $f(\Pfrak|\pfrak)$.
  It thus suffices to show that $\Gal(L|K)$ acts transitively on the set of primes above $\pfrak$.

  If not, then we find $\Pfrak$ and $\Qfrak$ lying above $\pfrak$ such that $\sigma\Pfrak \neq \Qfrak$ for any $\sigma$.
  By the Chinese remainder theorem, we can find some element $x \in \Qfrak$ which is not contained in $\sigma\Pfrak$ for any $\sigma$.
  The norm of this element $x$ has the form
  \[ t := \Norm_{L|K}(x) = \prod_{\sigma \in \Gal(L|K)} \sigma x \]
  which is an element of $\pfrak$, but
  \[ t = \prod_{\sigma} \sigma x \in \pfrak \subset \Pfrak \]
  while $x \notin \sigma \Pfrak$ for any $\sigma$.
  This contradicts the primality of $\Pfrak$.
\end{proof}

\begin{lemma}
  The following hold.
  \begin{enumerate}
    \item If $\afrak$ is an integral ideal of $A$, then $\Norm_{L|K}(\afrak) = \afrak^n$ where $n = [L:K]$.
    \item Suppose $L|K$ is Galois, and let $\Pfrak$ be a prime of $B$ lying over $\pfrak$.
          Write $\pfrak = (\Pfrak_{1} \cdots \Pfrak_{k})^{e}$.
          Then
          \[ \Norm_{L|K}(\Pfrak) \cdot B = (\Pfrak_{1} \cdots \Pfrak_{k})^{ef} = \prod_{\sigma \in \Gal(L|K)} \sigma \Pfrak. \]
    \item Supose $b \in B$ is a nonzero element.
          Then $\Norm_{L|K}((b)) = (\Norm_{L|K}(b))$.
  \end{enumerate}
\end{lemma}
\begin{proof}
  For (1), \todo{deduce to the case where $\afrak$ is prime, say $\pfrak$.}{Explain.}
  In this case, write
  \[ \pfrak \cdot B = \prod_{\Pfrak}\Pfrak^{e_{\Pfrak}}, \]
  so that
  \[ \Norm_{L|K}(\pfrak \cdot B) = \prod_{\Pfrak} \pfrak^{\sum e_{\Pfrak} f_{\Pfrak}}\]
  so that
  \[ \Norm_{L|K}(\pfrak \cdot B) = \pfrak^{\sum e_{\Pfrak} f_{\Pfrak}},\]
  where $f_{\Pfrak} := f(\Pfrak|\pfrak)$.
  Lemma~\ref{lemma:fundamental_equality} gives the claim for (1).

  For claim (2), the first equality follows from the definition, while the second \todo{follows from the transitivity of the Galois action.}{Add details.}

  Now for (3), suppose first that $L|K$ is Galois and put $\bfrak := (b)$.
  Then
  \[ \Norm(\bfrak) \cdot B = \prod_{\sigma \in \Gal(L|K)} \sigma \bfrak = (\prod_{\sigma} \sigma b) \cdot B = \Norm(b) \cdot B. \]
  The map $\afrak \mapsto \afrak \cdot B$ from $J_{K}(A) \to J_{L}(B)$ is \todo{injective}{why?} so the claim follows.

  If $L|K$ is not Galois, let $E$ denote the Galois closure, and use the transitivity in the tower $E|L|K$ to deduce the claim.
\end{proof}

Now let's go back to the case where $K$ is a number field and the Dedekind domain in question is the ring of integers.
\begin{lemma}
  Let $\afrak$ be an ideal of $\Ocal_{K}$, and consider its norm $\Norm_{K|\Qbb}(\afrak)$.
  Let $m \in \Nbb$ be the unique positive generator of $\Norm_{K|\Qbb}(\afrak)$.
  Then $m = \Norm(\afrak) = [\Ocal_{K}:\afrak]$.
\end{lemma}
\begin{proof}
  Exercise.
  Hint: Use the Chinese remainder theorem to reduce to the case where $\afrak$ is a power of a prime, and argue similarly to the proof of Lemma~\ref{lemma:fundamental_equality}.
\end{proof}

As promised in the last lecture, let's discuss some actual examples of class groups.
To do this, we will need to understand the splitting behavior of primes in a number field.
One way to do this, in most cases of interest, is to use the following result.
\begin{proposition}
  Let $A$, $B$, $L$ and $K$ be as above.
  Suppose that $B = A[\alpha]$ and let $f(X)$ be the minimal polynomial of $\alpha$ over $K$.
  Let $\pfrak$ be a prime of $A$, and $\bar f$ the reduction of $f$ mod $\pfrak$.
  Write
  \[ \bar f(X) = \bar P_{1}(X)^{e_{1}} \cdots \bar P_{k}(X)^{e_{k}}, \]
  the factorization of $\bar f$ into irreducibles, in the ring $(A/\pfrak)[X]$, all of which have leading coefficient $1$.
  Then
  \[ \pfrak \cdot B = \Pfrak_{1}^{e_{1}} \cdots \Pfrak_{k}^{e_{k}} \]
  where $\Pfrak_{i} = \pfrak \cdot B + P_{i}(\alpha) \cdot B$, where $P_{i}$ is a monic of $\bar P_{i}$.
\end{proposition}
\begin{proof}
  Exercise.
\end{proof}

\begin{example}
  Consider the quadratic field $K = \Qbb(\sqrt{-1})$.
  It's discriminant is $-4$ and its degree is $2$ while $s = 1$ and $r = 0$.
  The Minkowski bound is thus
  \[ \frac{2}{4} \cdot (4/\pi)^{1} \cdot \sqrt{4}. \]
  This number is an element of the open interval $(1,2)$.
  It follows that every ideal class has an integral representative of absolute norm $< 2$, and since this norm is a integer, it must be $1$.
  But an ideal has norm $1$ if and only if it is the unit ideal, so the class group is trivial.
\end{example}

\begin{example}
  Let's look at $K = \Qbb(\sqrt{-5})$ next.
  The degree is $2$ while $r = 0$ and $s = 1$.
  The discriminant is $-20$.
  Thus the Minkowski bound is
  \[ (1/2) \cdot (4/\pi) \cdot \sqrt{20} = 4 \cdot \sqrt{5} / \pi = 2.847\ldots. \]

  Thus we should focus our attention on ideals whose norm is bounded above by $2 + \epsilon$.
  To do this, let's see how $(2)$ splits in $K$.
  Using the proposition above and the fact that $\Ocal_{K} = \Zbb[\sqrt{-5}]$, we reduce $f = X^{2} + 5$ mod $2$ to obtain $X^{2} + 1$ in $\Fbb_{2}[X]$.
  This splits as $(X+1)^{2}$, so we have a single prime lying above $2$, say $\Pfrak$, and
  \[ 2 \cdot \Ocal_{K} = \Pfrak^{2}. \]
  Recall that
  \[ 2 = [K:\Qbb] = 2 \cdot f(\Pfrak|2) \]
  to see that $f(\Pfrak|2) = 1$.
  Thus the norm of $\Pfrak$ is indeed $(2)$.

  Recall that any ideal class has a representative of norm at most $2$, which means that the class group must be generated by $\Pfrak$, and the equation above shows that $\Pfrak$ has order $1$ or $2$ in the class group.

  Let's check whether $\Pfrak$ is principal.
  If so, say $\Pfrak = (a + b \cdot \sqrt{-5})$ with some $a,b \in \Zbb$, then
  \[ 2 = a^{2} + 5 b^{2}. \]
  But this has no solutions in $\Zbb$, so $\Pfrak$ is \emph{not principal}.
  It follows that
  \[ Cl_{K} \cong \Zbb/2 \]
  and that $\Pfrak$ is a genrator.
  Using the characterization of $\Pfrak$ from the propostiion above, we also deduce that $\Pfrak = (2,1 + \sqrt{-5})$.
\end{example}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
